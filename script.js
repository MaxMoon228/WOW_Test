// script.js

// Данные для раздела "Теория"
const topics = {
    battle_of_moscow: {
        title: 'Битва за Москву',
        text: `
            <p><strong>БИТВА ЗА МОСКВУ</strong></p>
            <p>Битва за Москву — первое решающее сражение Великой Отечественной войны. Столица СССР имела стратегическое значение: от результата сражения за Москву зависел исход войны. При защите главного города нашей Родины тысячи бойцов и командиров проявили невиданный героизм. Начав осенью 1941 года поход на Москву при подавляющем преимуществе в войсках и технике, немецкие полчища были разбиты и отброшены. Весь мир увидел, что Красная Армия не сломлена, она способна побеждать. Советские люди воспрянули духом.</p>
            <p><strong>ПЛАН БЛИЦКРИГА</strong></p>
            <p>Гитлеровское командование планировало разгромить СССР в блицкриге — молниеносной войне. Однако к октябрю 1941 года Москва оставалась непокорённой. По планам Гитлера, покончить со столицей советского государства должно было решительное наступление группы армий «Центр», получившее кодовое название «Тайфун».</p>
            <blockquote>
                «Непоколебимое решение фюрера сровнять Москву и Ленинград с землёй... Это будет народное бедствие, которое лишит центров не только большевизм, но и московитов (русских) вообще».
                <br>Из дневника начальника Генштаба сухопутных войск Германии Ф. Гальдера.
            </blockquote>
            <p>Фото: Н. Грановский / РИА Новости</p>
            <p><strong>Вяземская катастрофа</strong></p>
            <p>Танковая армия генерала Гейнца Гудериана начала наступление на московском направлении 30 сентября 1941 года, основные немецкие силы — 2 октября. Прорвав советский фронт, гитлеровцы окружили значительное количество частей Красной Армии в районе Брянска и Вязьмы. Более полумиллиона советских солдат погибли или попали в плен, в линии обороны западнее Москвы образовалась огромная брешь в 500 километров. Но отчаянное сопротивление окружённых советских армий задержало вражеский натиск на столицу на две недели. Слухи о немецком прорыве достигли Москвы 16 октября. В городе началась эвакуация оставшихся предприятий, часть населения устремилась на восток. Для предотвращения паники в столице с 20 октября было объявлено осадное положение и введён комендантский час.</p>
            <blockquote>
                «Нарушителей порядка немедля привлекать к ответственности с передачей суду военного трибунала, а провокаторов, шпионов и прочих агентов врага, призывающих к нарушению порядка, расстреливать на месте».
                <br>Из Постановления Государственного Комитета Обороны о введении в Москве осадного положения 19 октября 1941 года.
            </blockquote>
            <p>Фото: Л. Доренский / РИА Новости</p>
            <p><strong>ПАРАД СОРОК ПЕРВОГО</strong></p>
            <p>Иосиф Сталин срочно вызвал из Ленинграда генерала Георгия Жукова, который до этого руководил обороной города на Неве. В Москве шла дополнительная мобилизация добровольцев в дивизии народного ополчения. К столице перебрасывались свежие формирования с Дальнего Востока, из Сибири и внутренних районов страны. Тысячи женщин и мужчин, совсем юных и пожилых, рыли противотанковые траншеи и рвы на ближних подступах к городу. На предприятиях Москвы, которые до войны производили косметику или пишущие машинки, теперь изготавливали оболочки для гранат, бутылки с зажигательной смесью и патроны. Намерения врага с ходу взять Москву провалились.</p>
            <blockquote>
                «Я склоняю голову перед светлой памятью тех, кто стоял насмерть, кто не пропустил врага к сердцу нашей Родины, её столице, городу-герою Москве. Мы все в неоплатном долгу перед ними».
                <br>Г. К. Жуков.
            </blockquote>
            <p>Фото: А. Шайхет / РИА Новости</p>
            <p>Одним из переломных моментов в обороне столицы стало проведение 7 ноября 1941 года традиционного парада на Красной площади, с которого большинство воинов сразу уходили на фронт. Если в тяжелейшее время мы способны проводить парад в Москве, а Верховный Главнокомандующий остался в столице, победа будет за нами, — так думали советские люди.</p>
            <blockquote>
                «Пусть вдохновляет вас в этой войне мужественный образ наших великих предков — Александра Невского, Димитрия Донского, Кузьмы Минина, Димитрия Пожарского, Александра Суворова, Михаила Кутузова!»
                <br>Из выступления И. В. Сталина во время парада на Красной площади 7 ноября 1941 года
            </blockquote>
            <p>Фото: А. Еланчук / РИА Новости</p>
            <p><strong>И ВРАГУ НИКОГДА НЕ ДОБИТЬСЯ!</strong></p>
            <p>Невиданный героизм при защите Москвы осенью 1941 года проявили тысячи бойцов и командиров.</p>
            <p>В критический момент, когда казалось, что ничто не сможет остановить вражеские танки на пути к Москве, им навстречу были брошены курсанты из Подольска. Ценой своих жизней юноши из Подольского пехотного и артиллерийского училищ на несколько дней задержали противника. Большинство курсантов полегли на Ильинских рубежах, но советское командование выиграло время для организации новой оборонительной линии к западу от столицы.</p>
            <p>Фотография предоставлена РИА Новости</p>
            <p>Бой в районе Дубосеково (Волоколамский район). Ноябрь 1941 года.</p>
            <p>Фотография предоставлена РИА Новости</p>
            <p>Воины 316-й стрелковой дивизии под командованием генерала Ивана Панфилова 16 ноября 1941 года остановили удар танковых и пехотных частей врага. Рота, которой командовал политрук Василий Клочков, уничтожила тогда 18 немецких танков. Этот бой вошёл в историю как подвиг 28 героев-панфиловцев. Вражеские танки наши солдаты подрывали связками гранат и поджигали бутылками с зажигательной смесью. Об их подвиге вскоре узнала вся страна, а дивизия стала гвардейской и после гибели командира дивизии получила почётное наименование «Панфиловская».</p>
            <p>Бессмертный подвиг совершила в тылу врага Зоя Космодемьянская — боец советской диверсионно-разведывательной группы. Она поджигала дома, где находились фашисты, и однажды была схвачена немецкими солдатами. Во время допросов, сопровождавшихся пытками, Зоя не выдала никого из своих товарищей. Перед казнью в деревне Петрищево она крикнула в сторону германских солдат: «Это счастье — умереть за свой народ».</p>
            <blockquote>
                «И по снегу ногами босыми,
                Крепко сжав окровавленный рот,
                Как на трон, партизанка России
                На скрипящий взошла эшафот».
                <br>Ю. Друнина.
            </blockquote>
            <p>Фото: С. Лоскутов / РИА Новости</p>
            <p><strong>КАРТА КОНТРНАСТУПЛЕНИЯ</strong></p>
            <p>К началу декабря враг подошёл к Москве совсем близко. От посёлка Красная Поляна до центра столицы по прямой было всего около 30 километров. Ожесточённые сражения разыгрались в районе станции Крюково — на территории современного Зеленограда. Именно в этот момент советское командование поняло, что новый натиск врага на Москву, начавшийся в середине ноября, выдохся, и немцы напрягают последние силы. Пружина сжалась до отказа.</p>
            <p>План контрнаступления, доложенный Иосифу Сталину командующим Западным фронтом Георгием Жуковым в конце ноября 1941 года, состоял лишь из одной карты и пояснительной записки к ней. После чего в распоряжение командующих Калининским фронтов поступили свежие дивизии с востока страны, которые были хорошо вооружены и тепло одеты.</p>
            <p><strong>ПЕРЕЛОМ</strong></p>
            <p>Советское контрнаступление началось 5 декабря 1941 года. В атаку перешли соединения Западного, Калининского и части сил Юго-Западного фронтов. При этом советские войска по-прежнему уступали немцам в количестве людей и боевой техники, лишь по самолётам у нас было серьёзное превосходство.</p>
            <p>О. Кнорринг / РИА Новости</p>
            <p>Битва за Москву. Декабрь 1941 года.</p>
            <p>О. Кнорринг / РИА Новости</p>
            <p>Контрнаступление набирало силу, словно ураган. Немецкое командование было уверено, что основные советские силы давно разбиты, и не ожидало ответного удара. В результате враг дрогнул и побежал. Многие гитлеровские офицеры вспоминали в то время печальную судьбу армии Наполеона в 1812 году. А Красная Армия последовательно освободила Калинин, Клин, Истру, Волоколамск и другие подмосковные города. Уже 8 января 1942 года контрнаступление переросло в общее наступление — началась Ржевско-Вяземская операция.</p>
            <blockquote>
                «Мы беспощадный путь к Берлину
                Открыли битвой за Москву».
                <br>П. Шубин.
            </blockquote>
            <p>Фото: А. Гаранин / РИА Новости</p>
            <p><strong>ИТОГИ БИТВЫ ЗА МОСКВУ</strong></p>
            <p>В ходе наступления Красной Армии немцы были отброшены от столицы на 100–350 километров, от врага полностью очищены Московская, Тульская, Калининская, Рязанская области, частично освобождены Смоленская и Орловская. За провал под Москвой десятки высших немецких военачальников были сняты Гитлером со своих постов.</p>
            <p>Фото: В. Минкевич / РИА Новости</p>
            <p>Два красноармейца стоят рядом с перевёрнутым немецким танком, подбитым в сражении под Москвой.</p>
            <p>Фото: В. Минкевич / РИА Новости</p>
            <p>Победа досталась Красной Армии дорогой ценой — общие потери наших войск составили 1,8 миллиона человек (германская группа армий «Центр» потеряла за то же время 500 тысяч своих воинов). Однако теперь и враг, и наши союзники, и нейтральные страны наглядно убедились, что германскую армию можно бить её же оружием, то есть решительным наступлением. Турция и Япония, руководство которых рассматривало планы нападения на Советский Союз, заняли выжидательную позицию. США и Великобритания осознали, что СССР обладает огромным потенциалом для дальнейшей борьбы, и перед ними встал вопрос об оказании более действенной помощи Красной Армии. А в нашей стране и на территориях, оккупированных союзниками Германии, с новой силой развернулось партизанское движение. По сути, битва за Москву стала началом коренного перелома, когда окончательно рухнул немецкий план молниеносной войны.</p>
            <p>Около миллиона защитников столицы были награждены медалью «За оборону Москвы», 110 человек удостоены звания Героя Советского Союза. В мае 1965 года, к 20-летию Победы, Москве было присвоено высокое звание «Город-герой».</p>
        `,
        image: 'https://example.com/battle_of_moscow.jpg' // Замените на реальный URL изображения
    },
    leningrad_blockade: {
        title: 'Блокада Ленинграда',
        text: `
            <p><strong>ОБОРОНА ЛЕНИНГРАДА</strong></p>
            <p>Блокада Ленинграда началась 8 сентября 1941 года. В планах гитлеровских оккупантов было стереть с лица земли город и уничтожить всех его жителей. Осаждённый Ленинград <strong>872 дня</strong> боролся за жизнь. Ежедневные бомбардировки и страшный голод не сломили ленинградцев, они продолжали жить и бороться. Оборона Северной столицы и её блокада преподнесли беспрецедентный урок стойкости и мужества не только нашей стране, но и всему миру. Ленинград был окончательно освобождён от блокады 27 января 1944 года.</p>

            <p><strong>ПЛАНЫ НАЦИСТОВ</strong></p>
            <p>Сразу после начала вторжения в СССР гитлеровское командование объявило о планах по полному уничтожению Ленинграда. В конце сентября 1941 года Гитлер издал соответствующую директиву, где было сказано буквально следующее:</p>
            <blockquote>
                «1. Фюрер принял решение стереть город Петербург с лица земли. После разгрома советской армии существование этого города не будет иметь никакого смысла...<br>
                3. Предлагается плотно блокировать город и сровнять его с землёй с помощью артиллерии всех калибров и непрерывных бомбардировок с воздуха. Если в результате создавшейся в городе обстановки последуют заявления о сдаче города, они должны быть отклонены». Из директивы «О будущем города Петербурга».
            </blockquote>
            <p>Население, которое, по мнению Гитлера, могло попытаться покинуть город, следовало с помощью оружия загонять обратно в кольцо блокады. Согласно нацистским планам, Ленинград должен был погибнуть. Подробнее о директиве можно узнать <a href="https://www.prlib.ru/item/466089" target="_blank">здесь</a>.</p>

            <p><strong>НАЧАЛО БЛОКАДЫ</strong></p>
            <p>До войны Ленинград был крупнейшим центром советской промышленности и средоточием культурных ценностей. В политическом смысле город считался «колыбелью революций». Все эти факторы предопределяли гитлеровский план первоочередного захвата города на Неве. Финская армия должна была помочь немцам взять Ленинград и соединиться с войсками вермахта у Финского залива и восточнее Ладожского озера. Поэтому после того, как германская группа армий «Север» вышла к Пскову, финские дивизии начали наступление на Карельском перешейке. Положение города на Неве стало критическим.</p>
            <p>И хотя противнику не удалось взять Ленинград с ходу, город оказался отрезанным от Большой земли. Началась блокада. Снабжение могло осуществляться отныне только по воздуху или по Ладожскому озеру. Немцы практически оказались в пригородах Ленинграда и могли рассматривать в бинокли Исаакиевский собор.</p>

            <p><strong>ОРГАНИЗАЦИЯ ОБОРОНЫ</strong></p>
            <p>Уже 1 июля 1941 года в Ленинграде была создана Комиссия по обороне, которую возглавил партийный деятель Андрей Жданов. К моменту окружения города эвакуация населения проводилась недостаточными темпами. Около двух с половиной миллионов горожан, к числу которых надо прибавить беженцев из области, Прибалтики и бойцов Ленинградского фронта, оказались в блокаде. Ежедневно враг обстреливал город из артиллерийских орудий. В результате многочисленных бомбёжек сгорели продовольственные склады, в том числе крупнейшие — Бадаевские.</p>
            <p>Иосиф Сталин в срочном порядке назначил командующим Ленинградским фронтом генерала Георгия Жукова, который жёсткими мерами укрепил оборону на ближних подступах к городу и предпринял ряд контрударов. В результате уже в конце сентября командующий группы армий «Север» докладывал, что своими силами немецким войскам Ленинград не взять. Однако и прорвать блокаду советским войскам не удалось.</p>

            <p><strong>ГОЛОД</strong></p>
            <p>До войны Ленинград снабжался в основном поставками продовольствия из других регионов страны. Уже в начале сентября 1941 года были понижены нормы выдачи хлеба рабочим и инженерам, служащим, иждивенцам (по 600, 400 и 300 граммов соответственно). В середине сентября эту норму вновь уменьшили. Самую низкую норму выдачи хлеба по карточкам ввели 20 ноября 1941 года, когда рабочие стали получать всего 250, а служащие, иждивенцы и дети — 125 граммов хлеба в день.</p>
            <blockquote>
                «Сто двадцать пять блокадных грамм<br>
                С огнём и кровью пополам».<br>
                О. Берггольц.
            </blockquote>
            <p>Голод стал соратником врага. Люди умирали на работе, в своих квартирах, падали от изнеможения на улицах и больше не поднимались. За годы блокады, по послевоенным подсчётам, в Ленинграде погибли более миллиона человек (прежде всего от голода). Это больше, чем все военные потери Великобритании и США за Вторую мировую войну вместе взятые. Вина за гибель ленинградцев целиком и полностью лежит на гитлеровском командовании и руководстве Финляндии, чья армия блокировала город со стороны Карельского перешейка.</p>

            <p><strong>БОРЬБА</strong></p>
            <p>В мировой истории трудно отыскать случай, когда столь большой мегаполис оказывался вместе с жителями во вражеском кольце. Но Ленинград жил и боролся. На оставшихся в городе предприятиях трудились его жители (мужчины, женщины, подростки), которые ремонтировали военную технику, выпускали оружие, восстанавливали производство электроэнергии. Руководство города и командование фронтом делали всё возможное, чтобы прорвать блокаду. Символом несгибаемого мужества защитников Ленинграда стал «Невский пятачок».</p>
            <blockquote>
                «Вы, живые, знайте, что с этой земли мы уйти не хотели и не ушли.<br>
                Мы стояли насмерть у тёмной Невы. Мы погибли, чтоб жили вы».<br>
                Надпись на памятнике «Рубежный камень» на «Невском пятачке».
            </blockquote>
            <p>Попытки прорыва блокады предпринимались в сентябре и октябре 1941 года, а также начиная с января 1942 года в период общего наступления Красной Армии и затем в августе – октябре 1942 года в ходе Синявинской операции Ленинградского и Волховского фронтов. В ходе последней были обескровлены вражеские силы, специально стянутые к городу на Неве, чтобы взять его штурмом. Командование Ленинградским фронтом вело успешную противобатарейную войну с немецкой тяжёлой артиллерией — количество снарядов, упавших на город, сократилось в несколько раз.</p>
            <p>В Северной столице, начиная с трагической зимы 1941–1942 годов, были организованы специальные стационары и столовые, где кормили людей. Руководству города удалось не только спасти население от варварских обстрелов и бомбёжек, но и предотвратить эпидемии, которые могли возникнуть в период блокады.</p>

            <p><strong>«ДОРОГА ЖИЗНИ»</strong></p>
            <p>Единственной надеждой на спасение для сотен тысяч ленинградцев стала эвакуация и доставка продовольствия по Ладожскому озеру — летом по воде, зимой по льду. Эта трасса получила название «Дорога жизни». Доставка людей и грузов в период блокады по этой трассе по праву может сравниться с величайшими операциями Великой Отечественной войны. Как только в конце ноября 1941 года Ладога покрылась льдом, руководство Ленинграда организовало через озеро переброску продовольствия в город на грузовых машинах. Обратно эвакуировалось голодающее население. По «Дороге жизни» до весны 1943 года было доставлено 1,6 миллиона тонн грузов и эвакуированы 1,3 миллиона ленинградцев. Порой грузовики проваливались под лёд, но колонна продолжала движение, даже под обстрелом. По дну Ладожского озера удалось уложить трубопровод и электрический кабель.</p>
            <p>В начале 1942 года нормы выдачи хлеба населению стали постепенно повышаться, но многие люди продолжали умирать от последствий голода — прежде всего от дистрофии. В декабре 1941 года умерли 53 тысячи человек, в январе 1942 года — более 100 тысяч человек.</p>

            <p><strong>ОПЕРАЦИЯ «ИСКРА»</strong></p>
            <p>Прорыв блокады произошёл только в январе 1943 года в ходе операции «Искра» Ленинградского (командующий генерал-полковник Леонид Говоров) и Волховского (командующий генерал армии Кирилл Мерецков) фронтов. Общую координацию наступления осуществлял Георгий Жуков. Теперь советские ударные группировки превосходили врага на решающих направлениях в пять и более раз.</p>
            <p>Блокаду прорвали 18 января 1943 года на узком участке южнее Ладоги, шириной всего 8–11 километров. По этому коридору уже через несколько недель проложили железную дорогу, по которой доставляли в Ленинград продовольствие, вооружение, пополнение для защитников города.</p>
            <p>Город нашей славы боевой<br>
            Однако это не означало завершения всех проблем – боевая обстановка в городе оставалась по-прежнему напряжённой. А до полного снятия блокады Ленинграда понадобился ещё целый год борьбы с врагом, который только усилил налёты на город, особенно в ночное время, намного увеличив применение зажигательных бомб. За 1943 год по Ленинграду было выпущено 68 тысяч артиллерийских снарядов. Кроме того, он стал использовать дальнобойные орудия крупных калибров (210–240 мм).</p>
            <p>В этих условиях начальник Ленинградского гарнизона генерал-лейтенант Григорий Степанов 9 июля в июле 1943 года издал приказ о необходимости строгого выполнения гражданами правил поведения по сигналу воздушной тревоги и при артобстрелах. А для своевременного оказания помощи пострадавшим было организовано медико-санитарное патрулирование.</p>
            <p>Последний вражеский артиллерийский снаряд разорвался в городе 22 января 1944 года, а спустя несколько дней, 27 января, победоносным наступлением советских войск была окончательно снята блокада. Это событие ознаменовали артиллерийским салютом на берегах Невы из 324 орудий 24 артиллерийскими залпами, возвестив таким образом всему миру о великом успехе Красной Армии под Ленинградом.</p>
            <blockquote>
                «Рыдают люди, и поют, и лиц заплаканных не прячут.<br>
                Сегодня в городе — САЛЮТ!<br>
                Сегодня ленинградцы плачут...»<br>
                Ю. Воронов.
            </blockquote>
            <p>После этого 29 марта Государственный комитет обороны принял постановление «О первоочередных мероприятиях по восстановлению промышленности и городского хозяйства Ленинграда в 1944 году». Они стали продолжением плана восстановительных работ, который городские власти уже выполняли ещё со второй половины 1943 года. Согласно поставленным задачам батальоны местной противовоздушной обороны своими силами готовили каменщиков, штукатуров, плотников, маляров и прочих специалистов. В результате только усилиями личного состава МПВО Ленинграда было отремонтировано 2 118 жилых домов, два десятка лечебных учреждений, городская канализация и электросеть.</p>

            <p><strong>ИТОГИ ОБОРОНЫ ЛЕНИНГРАДА</strong></p>
            <p>Если бы враг взял город, все его жители были бы обречены на гибель, а немцы смогли бы перебросить значительные силы под Москву и Сталинград. В пригородах Ленинграда гитлеровцы и их пособники-коллаборационисты из эсэсовских прибалтийских подразделений расстреливали и вешали ни в чём не повинных женщин, детей, стариков. Великолепные архитектурные ансамбли пригородов Ленинграда — Гатчины, Царского Села, Петергофа — были разграблены и уничтожены оккупантами.</p>
            <p>Однако ленинградцы показали всему миру, на что они способны, защищая родной город. Сегодня в эти подвиги даже трудно поверить. Так, сотрудники Всесоюзного института растениеводства голодали вместе со всеми ленинградцами, но из богатейшей и уникальной коллекции зерна за все время блокады они не взяли ни одного зёрнышка. На рабочем месте от голода умер ленинградец Даниил Кютинен. Он работал пекарем.</p>
            <p>Великий композитор Дмитрий Шостакович начал писать свою знаменитую Седьмую «Ленинградскую» симфонию, находясь в блокадном городе и действуя в составе противопожарной команды во время налётов вражеской авиации. Впервые его произведение прозвучало в марте 1942 года в Куйбышеве, а 9 августа 1942 года — в самом Ленинграде. В разгар блокады в городе на Неве прошла серия футбольных матчей. Немцы не могли поверить, что в мёртвом, как они считали, городе играют в футбол…</p>
            <p>Ленинград выстоял и одержал великую победу над врагом — и военную, и моральную.</p>
        `,
        image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Leningrad_1941.jpg/800px-Leningrad_1941.jpg'
    },
    kursk_battle: {
    title: 'Курская битва',
    text: `
        <p><strong>КУРСКАЯ БИТВА</strong></p>
        <p>Важнейшим событием всей Великой Отечественной войны стала битва на Курской дуге летом 1943 года. Планы командования вермахта окружить и уничтожить советские войска на Курском выступе были разрушены. Красная Армия сама перешла в контрнаступление и нанесла тяжёлое поражение противнику. Курскую битву многие историки считают завершением коренного перелома в войне.</p>
        <p><strong>ПЛАНЫ ГИТЛЕРА</strong></p>
        <p>Летом 1943 года гитлеровское командование рассчитывало взять реванш на советско-германском фронте за своё поражение под Сталинградом. Победа над Красной Армией — пусть и на одном участке, под Курском, — могла, по мнению немецкого руководства, привести к последующему наступлению германских войск на юго-восточном или северо-восточном (на Москву) направлениях, обеспечить надёжную оборону немецких позиций на остальных участках фронта, заставить союзников СССР (Англию и США) отказаться от своих планов высадки войск во Франции.</p>
        <p>Условия для удара против Курского выступа, который занимали советские войска Центрального и Воронежского фронтов, казалось, были превосходные. Курская дуга имела ширину 200 километров и выступала на запад до 150 километров. Она образовалась в период контрудара германских войск Эриха фон Манштейна в конце зимы – начале весны 1943 года. Немцам тогда вновь удалось взять недавно освобождённый Красной Армией Харьков, но дойти до Курска вермахту уже не хватило сил, и фронт здесь стабилизировался. Дата удара была определена — 5 июля 1943 года. Германская операция под Курском получила наименование «Цитадель».</p>
        <p><strong>СНАЧАЛА — ВЫБИТЬ ТАНКИ</strong></p>
        <p>Данные разведки свидетельствовали, что противник собирается нанести удар в районе Курска. После обсуждений в Генштабе РККА и Ставке Верховного Главнокомандования было решено сначала выбить вражеские танки, измотать противника в оборонительных сражениях и лишь затем самим перейти в наступление.</p>
        <blockquote>
            «Советское командование рассматривало Курский выступ как плацдарм для развития наступления с задачей освобождения Орловской и Брянской областей на северо-западе и Украины на юго-западе. Здесь оно сосредоточило колоссальные силы. Начиная с марта русские укрепляли выступ, вырыв тысячи километров окопов, соорудив тысячи огневых точек и т. д. Глубина обороны достигала 100 километров».
        </blockquote>
        <p>Из книги британского журналиста (бывшего в годы войны в СССР) А. Верта «Россия в войне. 1941–1945» Фото: Н. Боде / РИА Новости</p>
        <p>Общая длина вырытых траншей и ходов сообщений равнялась расстоянию от Курска до Камчатки. Было создано несколько полос обороны, заминированы подходы к советским позициям, была даже построена новая железная дорога, чтобы поезда чётко и в срок подвозили войска, технику и боеприпасы к передовой.</p>
        <img src="https://raw.githubusercontent.com/MaxMoon228/WOW_Test/main/kursh.png" alt="Командир батареи лейтенант Н. Ковалёв с сослуживцами в окопах." class="topic-image">
        <p>Ф. Левшин / РИА Новости</p>
        <p><strong>БРОНЯ…</strong></p>
        <p>Немецкое командование делало всё возможное, чтобы оснастить свои войска новыми танками и самоходными орудиями, которые по своей бронестойкости и вооружению превосходили тогда основной советский средний танк — Т-34-76.</p>
        <p>Именно на ударную мощь новых бронированных машин вермахта (которые начали разрабатываться в Германии после встречи с советскими танками Т-34 и КВ) надеялся Гитлер летом 1943 года. Советскому командованию удалось захватить образец танка «Тигр», изучить его и начать разработку рекомендаций, каким образом с ним лучше бороться на поле боя. Однако новых самоходных советских орудий (СУ-152), которые на равных могли соперничать с новыми немецкими танками, пока на фронте было явно недостаточно. Т-34-85, калибр орудия которого был уже 85 мм, появился в Красной Армии только в начале 1944 года. В результате новые немецкие танки могли поражать советские «тридцатьчетвёрки» с расстояния 1,5–2 километра, тогда как советские орудия Т-34 могли пробить броню танков «Тигр» и «Пантера» (причём в основном бортовую броню) только с расстояния 300–400 метра.</p>
        <p><strong>…И КРЫЛЬЯ</strong></p>
        <img src="https://raw.githubusercontent.com/MaxMoon228/WOW_Test/main/prohorovka.png" alt="Советские лётчики на самолётах ИЛ-2 атакуют колонну противника." class="topic-image">
        <p>Ф. Левшин / РИА Новости</p>
        <p>Советские танкисты напряжённо готовили свою технику к лобовому столкновению с вражескими танками, а лётчики ВВС Красной Армии готовы были сразиться с лучшими германскими асами. Весной 1943 года советские пилоты одержали победу в воздушных сражениях в небе Кубани и теперь были готовы окончательно завоевать господство в воздухе. Авиачасти РККА получали новейшие истребители: Ла-5, Як-3, равно как и самолёты, поставленные союзниками по ленд-лизу: Р-39 «Аэрокобра» и другие.</p>
        <p><strong>СООТНОШЕНИЕ СИЛ</strong></p>
        <p>Общее преимущество перед Курской битвой было у советских войск Центрального (командующий Константин Рокоссовский) и Воронежского (командующий Николай Ватутин) фронтов. Плюс к этому в тылу основных советских сил располагался Степной фронт под командованием Ивана Конева, который должен был перейти в наступление после провала германского удара. Противник сосредоточил войска на узких участках фронта и был готов прорвать оборону РККА решительными ударами танковых сил при массированной поддержке бомбардировочной авиации.</p>
        <p><strong>НАЧАЛО «ЦИТАДЕЛИ»</strong></p>
        <p>Накануне германского наступления советское командование получило достоверную информацию, что атака начнётся на рассвете 5 июля. Было принято решение встретить врага контрартподготовкой. Тысячи советских орудий нанесли массированный огневой удар по изготовившимся вражеским частям. И хотя по большей части стрельба велась по площадям и не нанесла противнику значительного урона, всё же она задержала на несколько часов немецкое наступление.</p>
        <img src="https://raw.githubusercontent.com/MaxMoon228/WOW_Test/main/zanit.png" alt="Зенитный расчёт командира батареи старшего лейтенанта Д. Вяткина во время боя." class="topic-image">
        <p>Ф. Левшин / РИА Новости</p>
        <p>Около 6 часов утра советские воины увидели перед своими позициями танковые армады врага. Германская артиллерия и авиация обрушили свой огонь и бомбы на нашу оборону. Впереди, как правило, шли тяжёлые немецкие танки, за ними — средние. Толстая броня танков давала возможность противнику вклиниться в передовые советские порядки. Но даже окружённые советские подразделения продолжали сражаться, задерживая врага и уничтожая его пехоту.</p>
        <p>В течение нескольких дней танковым таранам немцев удалось вклиниться на северном фасе Курской дуги на 10–12 километров, на южном — до 35 километров.</p>
        <blockquote>
            «Помня о битве на Курской дуге, люди отдают дань уважения и признательности своей героической армии, совершившей великий патриотический и интернациональный подвиг. И никаким исказителям истории не удастся вычеркнуть его из памяти народов мира».
        </blockquote>
        <p>Маршал А. М. Василевский Фото: Ф. Левшин / РИА Новости</p>
        <p><strong>СРАЖЕНИЯ НА СЕВЕРНОМ ФАСЕ КУРСКОЙ ДУГИ</strong></p>
        <p>На севере Курского выступа разгорелись ожесточённые бои у населённого пункта Поныри. Чудеса храбрости проявляли здесь советские артиллеристы, пехотинцы и танкисты. Батарея капитана Георгия Игишева в районе села Самодуровка в течение 6–8 июля 1943 года каждый день отбивала по несколько атак противника. Советские артиллеристы уничтожили там 19 германских танков, стреляя по ним фактически в упор. Когда все наши орудия были разбиты, бойцы во главе с Игишевым пошли в рукопашный бой и не дали врагу прорваться на свои позиции. В том сражении капитан геройски погиб. После войны село Самодуровка, где принял свой последний бой Георгий Игишев, было переименовано в село Игишево.</p>
        <p>За несколько дней на северном фасе Курского выступа ударные немецкие войска лишились 50 тысяч человек и 400 танков. Вражеское наступление здесь было остановлено.</p>
        <blockquote>
            «"Тигры горят" — под таким заголовком было напечатано одно сообщение с фронта. Стали появляться заявления потрясённых немцев о "такой кровавой бойне, какой никогда раньше немецкие войска не видывали". Вот что сообщил немецкий капрал, захваченный в районе Белгорода: "Наш медперсонал не успевал оказывать помощь всем раненым. Один санитар сказал мне, что медпункт похож на бойню"».
        </blockquote>
        <p>Из книги А. Верта «Россия в войне. 1941–1945» Фото: Г. Капустянский / РИА Новости</p>

        `,
      image: 'https://upload.wikimedia.org/wikipedia/commons/3/32/Battle_of_Kursk.jpg'
    },
    stalingrad_battle: {
        title: 'Сталинградская битва',
        text: `Сталинградская битва (17 июля 1942 — 2 февраля 1943) стала переломным моментом Великой Отечественной войны и всей Второй мировой войны. Она началась как попытка немецких войск захватить Сталинград в рамках операции «Блау», но закончилась полным разгромом 6-й армии Вермахта под командованием Фридриха Паулюса.
        Сталинград стал ареной ожесточённых боёв. Особенно важными объектами сопротивления стали Мамаев курган и завод «Красный Октябрь». 13-я гвардейская дивизия под командованием Александра Родимцева особенно отличилась в обороне города. К ноябрю 1942 года советские войска окружили немецкую группировку в рамках операции «Уран». 2 февраля 1943 года остатки 6-й армии капитулировали.
        Перед капитуляцией Адольф Гитлер произвёл Паулюса в фельдмаршалы, чтобы тот не сдался в плен. Однако это не помогло: Паулюс сдался в плен вместе с оставшимися войсками. Сталинградская битва стала символом героизма советского народа и ознаменовала начало коренного перелома в войне.
        Победа под Сталинградом имела огромное значение. Она разгромила главные силы Вермахта на юге, открыла дорогу для освобождения Украины и стала важным этапом в разгроме фашистской Германии.`,
        image: 'https://example.com/stalingrad_battle.jpg'
    }
};

// Инициализация localStorage для хранения результатов
let bestResults = JSON.parse(localStorage.getItem('bestResults')) || {
    battle_of_moscow: 0,
    leningrad_blockade: 0,
    stalingrad_battle: 0,
    kursk_battle: 0
};

// Функция для обновления результатов в localStorage
function updateBestResults(topic, score) {
    if (score > bestResults[topic]) {
        bestResults[topic] = score;
        localStorage.setItem('bestResults', JSON.stringify(bestResults));
    }
}

// Функции для управления интерфейсом
function showSection(section) {
    document.getElementById('mainMenu').style.display = 'none';
    document.getElementById('theorySection').style.display = 'none';
    document.getElementById('practiceSection').style.display = 'none';
    document.getElementById('topicContent').style.display = 'none';
    document.getElementById('quizSection').style.display = 'none';
    document.getElementById('resultsSection').style.display = 'none';
    document.getElementById(section + 'Section').style.display = 'block';
}

function backToMainMenu() {
    showSection('main');
}

function showTopic(topic) {
    const topicData = topics[topic];
    document.getElementById('topicTitle').textContent = topicData.title; // Устанавливаем заголовок темы
    document.getElementById('topicText').innerHTML = topicData.text; // Используем innerHTML для поддержки HTML-разметки
    document.getElementById('topicImage1').src = topicData.image; // Первое изображение
    document.getElementById('topicImage2').src = 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Doroga_zhizni.jpg/800px-Doroga_zhizni.jpg'; // Второе изображение
    document.getElementById('topicContent').style.display = 'block';
    document.getElementById('theorySection').style.display = 'none';
}

function backToTheory() {
    showSection('theory');
}

// Тестирование
let currentQuiz = null;
let quizQuestions = [];
let currentQuestionIndex = 0;
let score = 0;

function startQuiz(topic) {
    // Вопросы на разные темы
    const questionsByTopic = {
        battle_of_moscow: [
            { question: 'Когда началась Битва за Москву?', options: ['22 июня 1941 года', '30 сентября 1941 года', '7 ноября 1941 года', '5 декабря 1941 года'], correct: '30 сентября 1941 года' },
            { question: 'Как назывался немецкий план захвата Москвы?', options: ['Тайфун', 'Барбаросса', 'Багратион', 'Цитадель'], correct: 'Тайфун' },
            { question: 'Кто командовал Западным фронтом в период Битвы за Москву?', options: ['Г. К. Жуков', 'К. К. Рокоссовский', 'Л. А. Говоров', 'Ф. И. Толбухин'], correct: 'Г. К. Жуков' },
            { question: 'Какой город стал ключевым узлом обороны на подступах к Москве?', options: ['Тула', 'Смоленск', 'Брянск', 'Калуга'], correct: 'Тула' },
            { question: 'Когда началось советское контрнаступление под Москвой?', options: ['30 сентября 1941 года', '19 ноября 1942 года', '5 декабря 1941 года', '23 февраля 1942 года'], correct: '5 декабря 1941 года' },
            { question: 'Какой фактор особенно осложнил наступление немцев на Москву?', options: ['Весеннее половодье', 'Сильные морозы и распутица', 'Проблемы с боеприпасами', 'Нехватка личного состава'], correct: 'Сильные морозы и распутица' },
            { question: 'Какие армии СССР участвовали в контрнаступлении?', options: ['Западный, Калининский и Брянский фронты', 'Северо-Западный и Волховский', '1-й и 2-й Белорусские фронты', 'Южный и Юго-Западный фронты'], correct: 'Западный, Калининский и Брянский фронты' },
            { question: 'Какая немецкая армия несла основную нагрузку в операции «Тайфун»?', options: ['Группа армий «Центр»', 'Группа армий «Север»', 'Группа армий «Юг»', '6-я армия'], correct: 'Группа армий «Центр»' },
            { question: 'Какое событие 7 ноября 1941 года стало символом сопротивления Москвы?', options: ['Разгром немецких войск', 'Военный парад на Красной площади', 'Взятие Тулы', 'Введение карточной системы'], correct: 'Военный парад на Красной площади' },
            { question: 'Какой город удостоен звания «Город-герой» за подвиг в Битве за Москву?', options: ['Тула', 'Смоленск', 'Калуга', 'Брянск'], correct: 'Тула' },
            { question: 'Какой был основной результат Битвы за Москву?', options: ['Окружение немецких войск', 'Полный разгром Вермахта', 'Срыв плана молниеносной войны', 'Открытие второго фронта'], correct: 'Срыв плана молниеносной войны' },
            { question: 'Какая советская техника впервые широко использовалась под Москвой?', options: ['Танк Т-34', 'Самолёт ИЛ-2', 'Танк КВ-1', 'Катюша'], correct: 'Танк Т-34' },
            { question: 'Какова была максимальная дистанция, на которую немецкие войска приблизились к Москве?', options: ['30 км', '50 км', '10 км', '70 км'], correct: '50 км' },
            { question: 'Какое было главное стратегическое значение победы под Москвой?', options: ['Открытие второго фронта', 'Деморализация немецкой армии', 'Вступление США в войну', 'Окружение немецких войск'], correct: 'Деморализация немецкой армии' },
            { question: 'Когда завершилась Битва за Москву?', options: ['7 января 1942 года', '5 мая 1942 года', '9 мая 1945 года', '23 февраля 1942 года'], correct: '7 января 1942 года' }
        ],
        kursk_battle: [
            { question: 'Какое главное танковое сражение произошло во время Курской битвы?', options: ['У Прохоровки', 'У Харькова', 'У Брянска', 'У Тулы'], correct: 'У Прохоровки' },
            { question: 'Как назывался немецкий план наступления в Курской битве?', options: ['Цитадель', 'Тайфун', 'Искра', 'Уран'], correct: 'Цитадель' },
            { question: 'В каком месяце началась Курская битва?', options: ['Май', 'Июнь', 'Июль', 'Август'], correct: 'Июль' },
            { question: 'Какой фронт возглавлял К. К. Рокоссовский в Курской битве?', options: ['Воронежский', 'Брянский', 'Центральный', 'Западный'], correct: 'Центральный' },
            { question: 'Какие два фронта участвовали в оборонительной фазе Курской битвы?', options: ['Центральный и Воронежский', 'Ленинградский и Карельский', 'Западный и Брянский', 'Степной и Белорусский'], correct: 'Центральный и Воронежский' },
            { question: 'Какое немецкое подразделение активно использовало танки «Тигр» и «Пантера»?', options: ['2-я танковая армия', '4-я танковая армия', '9-я армия', '6-я армия'], correct: '4-я танковая армия' },
            { question: 'Какое оружие стало символом Курской битвы?', options: ['Катюша', 'Танк Т-34', 'Пистолет ТТ', 'Автомат ППШ'], correct: 'Танк Т-34' },
            { question: 'Когда завершилась Курская битва?', options: ['23 августа 1943 года', '9 мая 1945 года', '2 февраля 1943 года', '5 июля 1943 года'], correct: '23 августа 1943 года' },
            { question: 'Какой фронт возглавлял Н. Ф. Ватутин?', options: ['Центральный', 'Воронежский', 'Ленинградский', 'Брянский'], correct: 'Воронежский' },
            { question: 'Какой город был освобождён в ходе Курской битвы?', options: ['Орёл', 'Киев', 'Минск', 'Ленинград'], correct: 'Орёл' },
            { question: 'Как назывался этап контрнаступления советских войск после Курской битвы?', options: ['Операция «Багратион»', 'Операция «Полководец Румянцев»', 'Операция «Искра»', 'Операция «Тайфун»'], correct: 'Операция «Полководец Румянцев»' },
            { question: 'Какие силы СССР противостояли Вермахту?', options: ['Центральный и Воронежский фронты', 'Ленинградский и Карельский', 'Западный и Белорусский', 'Степной и Южный'], correct: 'Центральный и Воронежский фронты' },
            { question: 'Как назывался этап контрнаступления советских войск после Курской битвы?', options: ['Операция «Багратион»', 'Операция «Полководец Румянцев»', 'Операция «Искра»', 'Операция «Тайфун»'], correct: 'Операция «Полководец Румянцев»' },
            { question: 'Какие силы СССР противостояли Вермахту?', options: ['Центральный и Воронежский фронты', 'Ленинградский и Карельский', 'Западный и Белорусский', 'Степной и Южный'], correct: 'Центральный и Воронежский фронты' },
            { question: 'Какое стратегическое значение имела Курская битва?', options: ['Окончательный переход инициативы к СССР', 'Срыв блокады Ленинграда', 'Разгром немецкой группы армий «Север»', 'Захват Берлина'], correct: 'Окончательный переход инициативы к СССР' },
            { question: 'Как назывался южный участок Курской дуги, где шли особенно ожесточенные бои?', options: ['Белгород', 'Смоленск', 'Тула', 'Вязьма'], correct: 'Белгород' },
            { question: 'Какие страны были союзниками Германии в Курской битве?', options: ['Италия и Венгрия', 'Венгрия и Румыния', 'Франция и Финляндия', 'Болгария и Япония'], correct: 'Венгрия и Румыния' }
        ],
        stalingrad_battle: [
            { question: 'Когда началась Сталинградская битва?', options: ['17 июля 1942 года', '19 ноября 1942 года', '2 февраля 1943 года', '22 июня 1941 года'], correct: '17 июля 1942 года' },
            { question: 'Как назывался немецкий план наступления на южном направлении?', options: ['Цитадель', 'Барбаросса', 'Тайфун', 'Блау'], correct: 'Блау' },
            { question: 'Какая немецкая армия была окружена в Сталинграде?', options: ['4-я танковая', '6-я армия', '9-я армия', '1-я горная'], correct: '6-я армия' },
            { question: 'Как называлась советская операция по окружению немцев?', options: ['Багратион', 'Искра', 'Уран', 'Кольцо'], correct: 'Уран' },
            { question: 'Кто командовал 6-й армией Вермахта, попавшей в окружение?', options: ['Эрвин Роммель', 'Фридрих Паулюс', 'Гейнц Гудериан', 'Вальтер Модель'], correct: 'Фридрих Паулюс' },
            { question: 'Какая операция завершила разгром немецких войск в Сталинграде?', options: ['Искра', 'Кольцо', 'Цитадель', 'Барбаросса'], correct: 'Кольцо' },
            { question: 'Когда капитулировали остатки 6-й армии в Сталинграде?', options: ['19 ноября 1942 года', '5 декабря 1941 года', '2 февраля 1943 года', '23 августа 1942 года'], correct: '2 февраля 1943 года' },
            { question: 'Какие армии СССР участвовали в Сталинградской битве?', options: ['62-я и 64-я', '1-я и 2-я гвардейские', '8-я и 10-я танковые', '16-я и 17-я воздушные'], correct: '62-я и 64-я' },
            { question: 'Как называлась стратегическая высота в центре Сталинградской битвы?', options: ['Сапун-гора', 'Пулковские высоты', 'Мамаев курган', 'Холм Славы'], correct: 'Мамаев курган' },
            { question: 'Какое соединение особенно отличилось при обороне города?', options: ['316-я стрелковая дивизия', '13-я гвардейская дивизия', '11-я танковая бригада', '50-й кавалерийский корпус'], correct: '13-я гвардейская дивизия' },
            { question: 'Какая страна-союзник Германии понесла большие потери под Сталинградом?', options: ['Италия', 'Румыния', 'Финляндия', 'Франция'], correct: 'Румыния' },
            { question: 'Какой завод в Сталинграде стал ареной ожесточённых боев?', options: ['ЗИС', 'Красный Октябрь', 'ГАЗ', 'Путиловский завод'], correct: 'Красный Октябрь' },
            { question: 'Какое значение имела победа в Сталинградской битве?', options: ['Разгром главных сил Вермахта на юге', 'Открытие второго фронта', 'Полный переход к обороне', 'Начало войны на Тихом океане'], correct: 'Разгром главных сил Вермахта на юге' },
            { question: 'Какое сообщение передал Гитлер Паулюсу перед его капитуляцией?', options: ['Держаться до последнего', 'Выходить из окружения', 'Начать переговоры', 'Сдавать город'], correct: 'Держаться до последнего' },
            { question: 'Какое звание было присвоено Ф. Паулюсу перед капитуляцией?', options: ['Генерал-лейтенант', 'Фельдмаршал', 'Генерал-полковник', 'Майор'], correct: 'Фельдмаршал' }
        ],
        leningrad_blockade: [
        { question: 'Когда началась блокада Ленинграда?', options: ['8 сентября 1941 года', '22 июня 1941 года', '18 января 1943 года', '9 мая 1945 года'], correct: '8 сентября 1941 года' },
        { question: 'Какова продолжительность блокады Ленинграда?', options: ['872 дня', '1000 дней', '600 дней', '500 дней'], correct: '872 дня' },
        { question: 'Как назывался маршрут, по которому доставлялись продукты в блокадный город?', options: ['Дорога Победы', 'Дорога Надежды', 'Дорога жизни', 'Дорога фронта'], correct: 'Дорога жизни' },
        { question: 'Через какое озеро проходила Дорога жизни?', options: ['Байкал', 'Онего', 'Ладожское', 'Чудское'], correct: 'Ладожское' },
        { question: 'Какова минимальная норма выдачи хлеба на человека в блокадном Ленинграде зимой 1941 года?', options: ['500 граммов', '300 граммов', '250 граммов', '125 граммов'], correct: '125 граммов' },
        { question: 'Когда была окончательно снята блокада Ленинграда?', options: ['9 мая 1945 года', '27 января 1944 года', '18 января 1943 года', '1 февраля 1944 года'], correct: '27 января 1944 года' },
        { question: 'Как называлась операция по прорыву блокады Ленинграда в январе 1943 года?', options: ['Багратион', 'Искра', 'Уран', 'Цитадель'], correct: 'Искра' },
        { question: 'Как назывался знаменитый дневник девочки, ставший символом блокады?', options: ['Дневник Тани Савичевой', 'Дневник Анны Франк', 'Дневник Марины Цветаевой', 'Дневник Ольги Берггольц'], correct: 'Дневник Тани Савичевой' },
        { question: 'Кто был командующим Ленинградским фронтом в период блокады?', options: ['Г. К. Жуков', 'Л. А. Говоров', 'И. С. Конев', 'К. К. Рокоссовский'], correct: 'Л. А. Говоров' },
        { question: 'Какие немецкие войска осуществляли блокаду Ленинграда?', options: ['Группа армий «Север»', 'Группа армий «Центр»', 'Группа армий «Юг»', 'Вермахт-Запад'], correct: 'Группа армий «Север»' },
        { question: 'Какой символ стал знаком памяти о жертвах блокады Ленинграда?', options: ['Красная звезда', 'Черный хлеб', 'Ленточка цвета блокады', 'Синий платок'], correct: 'Черный хлеб' },
        { question: 'Как назывался мемориальный комплекс, посвященный блокаде Ленинграда?', options: ['Пискарёвское кладбище', 'Холм Славы', 'Мамаев курган', 'Брестская крепость'], correct: 'Пискарёвское кладбище' },
        { question: 'Какой композитор создал знаменитую «Седьмую симфонию», известную как «Ленинградская»?', options: ['Сергей Рахманинов', 'Дмитрий Шостакович', 'Игорь Стравинский', 'Сергей Прокофьев'], correct: 'Дмитрий Шостакович' },
        { question: 'Какой лозунг был популярен среди жителей блокадного Ленинграда?', options: ['Всё для фронта, всё для победы!', 'Работай, Ленинград!', 'Ни шагу назад!', 'За Родину, за Сталина!'], correct: 'Работай, Ленинград!' },
        { question: 'Какая улица в Ленинграде стала символом блокады, где был размещен знаменитый плакат об артобстреле?', options: ['Невский проспект', 'Литейный проспект', 'Московский проспект', 'Каменноостровский проспект'], correct: 'Невский проспект' }
    ],
    };

    // Выбираем вопросы для текущей темы
    quizQuestions = questionsByTopic[topic];
    shuffleArray(quizQuestions); // Перемешать вопросы
    currentQuiz = topic;
    currentQuestionIndex = 0;
    score = 0;

    document.getElementById('quizSection').style.display = 'block';
    document.getElementById('practiceSection').style.display = 'none';

    // Начинаем тест сразу, без кнопки "Начать тестирование"
    showNextQuestion();
}

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

let selectedOption = null;

function showNextQuestion() {
    if (currentQuestionIndex >= quizQuestions.length) {
        showResults();
        return;
    }

    const question = quizQuestions[currentQuestionIndex];
    document.getElementById('quizQuestion').textContent = question.question;
    document.getElementById('quizCounter').textContent = `Вопрос ${currentQuestionIndex + 1}/${quizQuestions.length}`;

    const optionsContainer = document.getElementById('quizOptions');
    optionsContainer.innerHTML = ''; // Очистить предыдущие варианты ответов

    question.options.forEach((option, index) => {
        const btn = document.createElement('button');
        btn.textContent = option;
        btn.classList.add('option-btn'); // Добавляем класс для стилей
        btn.dataset.index = index; // Сохраняем индекс варианта ответа
        btn.onclick = () => selectOption(index, btn);
        optionsContainer.appendChild(btn);
    });

    // Сбрасываем выбранный ответ
    selectedOption = null;

    // Скрываем кнопку "Ответить"
    document.getElementById('submitBtn').style.display = 'none';
}

function selectOption(selectedIndex, button) {
    if (selectedOption !== null) {
        selectedOption.style.backgroundColor = '#e0e0e0'; // Возвращаем стандартный серый цвет
    }

    selectedOption = button; // Сохраняем выбранный вариант
    selectedOption.style.backgroundColor = '#d1d1d1'; // Подсвечиваем выбранный ответ серым цветом

    // Показываем кнопку "Ответить", если выбран ответ
    if (selectedOption !== null) {
        document.getElementById('submitBtn').style.display = 'block';
    }
}

function submitAnswer() {
    if (selectedOption === null) return; // Если не выбран ответ, ничего не делаем

    const question = quizQuestions[currentQuestionIndex];
    if (question.options[selectedOption.dataset.index] === question.correct) {
        score++;
    }

    currentQuestionIndex++;
    showNextQuestion();
}

function showResults() {
    document.getElementById('quizSection').style.display = 'none';
    document.getElementById('resultsSection').style.display = 'block';
    document.getElementById('resultsMessage').textContent = `Ваш результат: ${score}/${quizQuestions.length} правильных ответов`;

    // Обновляем лучший результат для текущей темы
    updateBestResults(currentQuiz, score);
}

function restartQuiz() {
    // Скрываем результаты и показываем главный экран теста
    document.getElementById('resultsSection').style.display = 'none';
    document.getElementById('quizSection').style.display = 'block';

    // Обнуляем переменные
    currentQuestionIndex = 0;
    score = 0;
    shuffleArray(quizQuestions); // Перемешиваем вопросы заново

    // Начинаем тест сразу, без кнопки "Начать тестирование"
    showNextQuestion();
}

function goToTheory() {
    showSection('theory');
}

function backToMainMenu() {
    // Скрываем все секции и показываем главное меню
    document.getElementById('mainMenu').style.display = 'block';
    document.getElementById('theorySection').style.display = 'none';
    document.getElementById('practiceSection').style.display = 'none';
    document.getElementById('topicContent').style.display = 'none';
    document.getElementById('quizSection').style.display = 'none';
    document.getElementById('resultsSection').style.display = 'none';
    document.getElementById('profileSection').style.display = 'none'; // Добавлено скрытие профиля
}

// Функция для отображения модального окна
function showNicknameModal() {
    const nicknameInput = document.getElementById('nicknameInput');
    document.getElementById('nicknameModal').style.display = 'block';
}

// Функция для сохранения имени пользователя
function saveNickname() {
    const nicknameInput = document.getElementById('nicknameInput');
    const nickname = nicknameInput.value.trim();

    // Проверка на валидность имени
    if (!/^[A-Za-zА-Яа-я0-9\.]+$/.test(nickname)) {
        alert('Имя может содержать только буквы и цифры.');
        return;
    }

    if (nickname.length === 0) {
        alert('Имя не может быть пустым.');
        return;
    }

    // Сохраняем имя в localStorage
    localStorage.setItem('nickname', nickname);

    // Скрываем модальное окно
    document.getElementById('nicknameModal').style.display = 'none';

    // Переходим на страницу профиля
    showProfile();
}

// Проверка наличия сохраненного никнейма
function checkNickname() {
    const nickname = localStorage.getItem('nickname');
    if (nickname) {
        // Если никнейм уже сохранен, переходим на страницу профиля
        showProfile();
    } else {
        // Если никнейм не сохранен, открываем модальное окно
        document.getElementById('nicknameModal').style.display = 'block';
    }
}

// Функция для отображения страницы профиля
function showProfile() {
    const nickname = localStorage.getItem('nickname') || 'Гость';
    document.getElementById('profileNickname').textContent = `${nickname}`;
    document.getElementById('battleOfMoscowResult').textContent = `Битва за Москву: ${bestResults.battle_of_moscow}/15`;
    document.getElementById('leningradBlockadeResult').textContent = `Блокада Ленинграда: ${bestResults.leningrad_blockade}/15`;
    document.getElementById('stalingradBattleResult').textContent = `Сталинградская битва: ${bestResults.stalingrad_battle}/15`;
    document.getElementById('kurskBattleResult').textContent = `Курская битва: ${bestResults.kursk_battle}/15`;

    // Скрываем главное меню и показываем страницу профиля
    document.getElementById('mainMenu').style.display = 'none';
    document.getElementById('profileSection').style.display = 'block';
}

// Функция для обновления лучших результатов
function updateBestResults(topic, score) {
    if (score > bestResults[topic]) {
        bestResults[topic] = score;
        localStorage.setItem('bestResults', JSON.stringify(bestResults));
    }
}

// Функция для обновления кнопки никнейма
function updateNicknameButton(nickname) {
    const nicknameButtonContainer = document.getElementById('nicknameButtonContainer');
    nicknameButtonContainer.innerHTML = `
        <button id="savedNicknameButton" onclick="showProfile()" style="background-color: #e0e0e0; color: black;">
            ${nickname}
        </button>
    `;
}

// Функция для загрузки сохраненного имени при запуске приложения
function loadNickname() {
    const savedNickname = localStorage.getItem('nickname');
    if (savedNickname) {
        updateNicknameButton(savedNickname);
    }
}

// Загружаем имя и результаты при запуске приложения
window.onload = function () {
    loadNickname();
};
